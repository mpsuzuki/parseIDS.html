<html>
  <head>
    <title>parseIDS</title>
    <style>
    <!--
    body {
      text-align: center;
    }
    #Wrapper {
      text-align: left;
      width: 100%;
      margin: 0;
      auto;
    }
    #SideBar {
      text-align: left;
      width: 20%;
      float: left;
      background-color: AFAFAF;
      display: none;
    }
    #MainContainer {
      text-align: left;
      width: 79%;
      margin-left: 1%;
      float: left;
    }
    *.FoundIdsNavigatorHeader {
      display: none;
    }
    #FoundIdsTable {
      display: none;
    }
    *.FoundIdsNavigatorFooter {
      display: none;
    }
    #Footer {
      clear: both;
      width: 100%;
    }
    -->
    </style>
  </head>
  <body>
    <script type="text/javascript">
    <!--
      // -- constant DOM element
      var elmSideBar = null;
      var elmAtomicIds = null;
      var elmStatusMsg = null;
      var elmFoundIdsBody = null;
      var elmFoundIdsTable = null;

      // -- global variables
      var showOptions = false;
      var usePng = false;
      var maxPngRows = 10;
      var maxPngColumns = 2;
      var pngHeight = 50;
      var curPage = 0;
      var sideBarWidthPercent = 20;
      var sortTotalStroke = false;

      // -------------------------------------------------------
      var DB_IDS = {};
      DB_IDS.Unihan = {};
      DB_IDS.Unihan.parent = DB_IDS;
      DB_IDS.CJKSR = {};
      DB_IDS.CJKSR.parent = DB_IDS;

      // -------------------------------------------------------
      DB_IDS.Unihan.isLoaded = false;
      DB_IDS.Unihan.initByTSV = function(unihanText) {
        var i, j, l, toks, u, ustr, prop, val;
        var unihanItems = unihanText.split("\n");
        j = 0;
        for ( i in unihanItems ) {
          if ( unihanItems[i].slice(0,2) == "U+" ) {
            toks = unihanItems[i].split("\t");
            l = toks[0].length;
            u = parseInt(toks[0].slice(2,l), 16);
            if (u < 0x10000) {
              ustr = String.fromCharCode(u);
            } else if (u < 0xEFFFF) {
              ustr = String.fromCharCode( ( ( u - 0x10000 ) >> 10 ) | 0xD800, ( ( u - 0x10000 ) & 0x3FF) | 0xDC00 );
            } else if (u < 0x100000) {
              continue;
            // Unihan DB should not mention about PUA with Ch. Entity Ref.
            // } else if (u < 0x110000) {
            //   ustr = crc2charName[u - 0x100000];
            } else {
              continue;
            }
            prop  = toks[1];
            val   = toks[2];
            if ( prop != "kTotalStrokes" ) {
              continue;
            }
            if ( this[prop] == undefined ) {
              this[prop] = new Array();
            }
            this[prop][ustr] = parseInt(val, 10);
            j += 1;
          }
        }
        this.isLoaded = true;
        return unihanItems.length;
      };
      DB_IDS.Unihan.sortCharsByTotalStrokes = function(chars) {
        if (!DB_IDS.Unihan.isLoaded) {
          return chars;
        }
        if (chars == null) {
          return chars;
        }
        var results = chars.sort(function(a, b) {
          var tsa = DB_IDS.Unihan.kTotalStrokes[a];
          var tsb = DB_IDS.Unihan.kTotalStrokes[b];
          if (tsa != undefined && tsb != undefined) {
            return (tsa - tsb);
          } else if (tsa == undefined && tsb == undefined) {
            return (a - b);
          } else if (tsa != undefined) {
            return -1;
          } else {
            return 1;
          }
        });
        return results;
      };
      DB_IDS.Unihan.sortCharsByUCS = function(chars) {
        if (chars == null) {
          return chars;
        }
        var charsUcs = {};
        for ( var i = chars.length; i > 0; ) {
          i -= 1;
          charsUcs[chars[i]] = DB_IDS.ucsArrToUcs4Codepoint(chars[i]);
        }
        var charsSorted = chars.sort(function(a, b) {
          return (charsUcs[a] - charsUcs[b]);
        });
        return charsSorted;
      }

      // -------------------------------------------------------
      DB_IDS.CJKSR.isLoaded = false;
      DB_IDS.CJKSR.ucs2srcInfo = {};
      DB_IDS.CJKSR.initByIsoTxt = function(isoCjkSrcTxt) {
        var lines = isoCjkSrcTxt.split("\n");
        var numLines = lines.length;
        while (lines.length > 0) {
          var toks = lines.shift().split(";");
          if (toks.length < 11) {
            continue;
          }

          var u = parseInt(toks.shift().replace(/^U\+/, ""), 16);
          if (u < 0x10000) {
            u = String.fromCharCode(u);
          } else
          if (u < 0xF0000) {
            u = String.fromCharCode( ( ( u - 0x10000 ) >> 10 ) | 0xD800, ( ( u - 0x10000 ) & 0x3FF) | 0xDC00 );
          }

          this.ucs2srcInfo[u] = {};
          toks.shift(); // discard RS info
          this.ucs2srcInfo[u]["G"]  = toks.shift();
          this.ucs2srcInfo[u]["T"]  = toks.shift();
          this.ucs2srcInfo[u]["J"]  = toks.shift();
          this.ucs2srcInfo[u]["K"]  = toks.shift();
          this.ucs2srcInfo[u]["V"]  = toks.shift();
          this.ucs2srcInfo[u]["H"]  = toks.shift();
          this.ucs2srcInfo[u]["KP"] = toks.shift();
          this.ucs2srcInfo[u]["U"]  = toks.shift();
          this.ucs2srcInfo[u]["M"]  = toks.shift();
        }
        this.isLoaded = true;
        return numLines;
      }
      DB_IDS.CJKSR.checkSrcCoverage = function(ustr, coverage) {
        if (!coverage || !coverage.length) {
          return true;
        }

        for (var i = 0; i < coverage.length; i += 1) {
          if (this.ucs2srcInfo[ustr] && this.ucs2srcInfo[ustr][coverage[i]].length) {
            return true;
          }
        }

        return false;
      }
      DB_IDS.CJKSR.applyFilterToChars = function(chars, coverage) {
        var results = [];
        for (var i = 0; i < chars.length; i += 1) {
          if (this.checkSrcCoverage(chars[i], coverage)) {
            results.push(chars[i]);
          }
        }
        return results;
      };

      // -------------------------------------------------------

      DB_IDS.crc16ascii = function(s) {
        var crc = 0xFFFF;
        var j, i;
 
        for (i = 0; i < s.length; i++) {
 
          c = s.charCodeAt(i);
          if (c > 255) {
            throw new RangeError();
          }
          j = (c ^ (crc >> 8)) & 0xFF;
          crc = this.crc16ascii.crc16Table[j] ^ (crc << 8);
        }
 
        return ((crc ^ 0) & 0xFFFF);
      } 
      DB_IDS.crc16ascii.crc16Table = [0x0000, 0x1021, 0x2042, 0x3063, 0x4084, 0x50a5,
                                      0x60c6, 0x70e7, 0x8108, 0x9129, 0xa14a, 0xb16b,
                                      0xc18c, 0xd1ad, 0xe1ce, 0xf1ef, 0x1231, 0x0210,
                                      0x3273, 0x2252, 0x52b5, 0x4294, 0x72f7, 0x62d6,
                                      0x9339, 0x8318, 0xb37b, 0xa35a, 0xd3bd, 0xc39c,
                                      0xf3ff, 0xe3de, 0x2462, 0x3443, 0x0420, 0x1401,
                                      0x64e6, 0x74c7, 0x44a4, 0x5485, 0xa56a, 0xb54b,
                                      0x8528, 0x9509, 0xe5ee, 0xf5cf, 0xc5ac, 0xd58d,
                                      0x3653, 0x2672, 0x1611, 0x0630, 0x76d7, 0x66f6,
                                      0x5695, 0x46b4, 0xb75b, 0xa77a, 0x9719, 0x8738,
                                      0xf7df, 0xe7fe, 0xd79d, 0xc7bc, 0x48c4, 0x58e5,
                                      0x6886, 0x78a7, 0x0840, 0x1861, 0x2802, 0x3823,
                                      0xc9cc, 0xd9ed, 0xe98e, 0xf9af, 0x8948, 0x9969,
                                      0xa90a, 0xb92b, 0x5af5, 0x4ad4, 0x7ab7, 0x6a96,
                                      0x1a71, 0x0a50, 0x3a33, 0x2a12, 0xdbfd, 0xcbdc,
                                      0xfbbf, 0xeb9e, 0x9b79, 0x8b58, 0xbb3b, 0xab1a,
                                      0x6ca6, 0x7c87, 0x4ce4, 0x5cc5, 0x2c22, 0x3c03,
                                      0x0c60, 0x1c41, 0xedae, 0xfd8f, 0xcdec, 0xddcd,
                                      0xad2a, 0xbd0b, 0x8d68, 0x9d49, 0x7e97, 0x6eb6,
                                      0x5ed5, 0x4ef4, 0x3e13, 0x2e32, 0x1e51, 0x0e70,
                                      0xff9f, 0xefbe, 0xdfdd, 0xcffc, 0xbf1b, 0xaf3a,
                                      0x9f59, 0x8f78, 0x9188, 0x81a9, 0xb1ca, 0xa1eb,
                                      0xd10c, 0xc12d, 0xf14e, 0xe16f, 0x1080, 0x00a1,
                                      0x30c2, 0x20e3, 0x5004, 0x4025, 0x7046, 0x6067,
                                      0x83b9, 0x9398, 0xa3fb, 0xb3da, 0xc33d, 0xd31c,
                                      0xe37f, 0xf35e, 0x02b1, 0x1290, 0x22f3, 0x32d2,
                                      0x4235, 0x5214, 0x6277, 0x7256, 0xb5ea, 0xa5cb,
                                      0x95a8, 0x8589, 0xf56e, 0xe54f, 0xd52c, 0xc50d,
                                      0x34e2, 0x24c3, 0x14a0, 0x0481, 0x7466, 0x6447,
                                      0x5424, 0x4405, 0xa7db, 0xb7fa, 0x8799, 0x97b8,
                                      0xe75f, 0xf77e, 0xc71d, 0xd73c, 0x26d3, 0x36f2,
                                      0x0691, 0x16b0, 0x6657, 0x7676, 0x4615, 0x5634,
                                      0xd94c, 0xc96d, 0xf90e, 0xe92f, 0x99c8, 0x89e9,
                                      0xb98a, 0xa9ab, 0x5844, 0x4865, 0x7806, 0x6827,
                                      0x18c0, 0x08e1, 0x3882, 0x28a3, 0xcb7d, 0xdb5c,
                                      0xeb3f, 0xfb1e, 0x8bf9, 0x9bd8, 0xabbb, 0xbb9a,
                                      0x4a75, 0x5a54, 0x6a37, 0x7a16, 0x0af1, 0x1ad0,
                                      0x2ab3, 0x3a92, 0xfd2e, 0xed0f, 0xdd6c, 0xcd4d,
                                      0xbdaa, 0xad8b, 0x9de8, 0x8dc9, 0x7c26, 0x6c07,
                                      0x5c64, 0x4c45, 0x3ca2, 0x2c83, 0x1ce0, 0x0cc1,
                                      0xef1f, 0xff3e, 0xcf5d, 0xdf7c, 0xaf9b, 0xbfba,
                                      0x8fd9, 0x9ff8, 0x6e17, 0x7e36, 0x4e55, 0x5e74,
                                      0x2e93, 0x3eb2, 0x0ed1, 0x1ef0];
      DB_IDS.crc2charName = new Array();
      DB_IDS.charName2crc = function(s) {
        var i;
        for (i = 0; s.charCodeAt(i) < 256; i += 1 ) {
          if (s[i] == ";") {
            break;
          }
        }
        if (s[i] != ";") {
          i -= 1;
        }
        var charName = s.substr(0, i + 1);
        var charCode = this.crc16ascii(charName.substr(1, charName.length - 2));
        if (this.crc2charName[charCode] == undefined) {
          this.crc2charName[charCode] = charName;
        }
        return charCode + 0x100000;
      }
      DB_IDS.utf16StrToUcsArray = function(ustr) {
        var i, c, u, arr;
        arr = new Array();
        for (i = 0; i < ustr.length; i += 1) {
          if (ustr[i] == "&") {
            var u = this.charName2crc(ustr.slice(i));
            c = String.fromCharCode( ( ( u - 0x10000 ) >> 10 ) | 0xD800, ( ( u - 0x10000 ) & 0x3FF) | 0xDC00 );
            arr.push(c);
            i += this.crc2charName[u - 0x100000].length - 1;
          } else {
            c = ustr.charCodeAt(i);
            if (0xD800 <= c && c <= 0xDBFF && (i+1) < ustr.length) {
              c = ustr.charCodeAt(i+1);
              if (0xDC00 <= c && c <= 0xDFFF) {
                arr.push(ustr.substr(i,2));
                i += 1;
                continue;
              }
            }
            arr.push(ustr.substr(i,1));
          }
        }
        return arr;
      }
      DB_IDS.ucsArrToUcs4Codepoint = function(ustr) {
        // single BMP character
        if (ustr.length == 1) {
          return ustr.charCodeAt(0);
        }
        else if (ustr[0] == "&") {
        // CRC-16 hash value on the 2nd PUA plane (0x100000)
          return (0x100000 + this.crc16ascii(ustr.split(/[&;]/)[1]));
        }

        // surrogate
        return ( ((ustr.charCodeAt(0) & 0x03FF) << 10) + (ustr.charCodeAt(1) & 0x03FF) + 0x10000);
      }
      DB_IDS.IdsItem = function() {
        this.idsArrays = new Array();
        this.cacheN = new Array();
      }
      DB_IDS.IdsItem.prototype.setUcs = function(ucs) {
        this.ucs = ucs;
        return this;
      }
      DB_IDS.IdsItem.prototype.setIdss = function(idss) {
        this.idss = idss;
        for (i in this.idss) {
          this.idsArrays[i] = DB_IDS.utf16StrToUcsArray(this.idss[i]);
        }
        return this;
      }
      DB_IDS.IdsItem.prototype.countAComponent = function(c) {
        var i, j, u;
        var idsArr;
        var numFound, maxNumFound;
        if ( this.cacheN[c] != undefined ) {
          return this.cacheN[c];
        } else if ( this.ucs == c ) {
          maxNumFound = 1;
        } else {
          maxNumFound = 0;
          for ( i in this.idss ) {
            numFound = 0;
            idsArr = this.idsArrays[i];
            if (idsArr.length > 1) {
              for ( j in idsArr ) {
                u = idsArr[j];
                if ( DB_IDS.ucs2idsDB[u] != undefined ) {
                  numFound += DB_IDS.ucs2idsDB[u].countAComponent(c);
                }
              }
            }
            maxNumFound = Math.max(maxNumFound, numFound);
          }
        }

        this.cacheN[c] = maxNumFound;
        return maxNumFound;
      }
      DB_IDS.ucs2idsDB = new Array();
      DB_IDS.hasUcs2IdsDB = function() {
        return (this.ucs2idsDB != undefined && this.ucs2idsDB.length > 0);
      };
      DB_IDS.initUcs2IdsDBByTSV = function(idsText) {
        var ucsName, ucs, toks, i, j, k;
        var idsItems = idsText.split("\n");
        for ( i in idsItems ) {
          toks = idsItems[i].split("\t");
          if (toks.length < 3) {
            continue;
          }
          ucsName = toks.shift();
          ucs = toks.shift();
          if (ucs[0] == "&") {
            ucs = this.charName2crc(ucs);
            ucs = String.fromCharCode( ( ( ucs - 0x10000 ) >> 10 ) | 0xD800, ( ( ucs - 0x10000 ) & 0x3FF) | 0xDC00 );
          }
          this.ucs2idsDB[ucs] = (new DB_IDS.IdsItem()).setUcs(ucs).setIdss(toks);
        }
        return idsItems.length;
      };
      DB_IDS.lookupByString = function(queryStr) {
        var res = {};
        res.components = this.utf16StrToUcsArray(queryStr);
        res.ignoredChars = new Array();
        res.foundChars = [];

        var lookupDB = new Array();
        var candidates = new Array();
        var results = new Array();
        var i, j, c, d, n, u;

        for ( i in res.components ) {
          c = res.components[i];
          u = DB_IDS.ucsArrToUcs4Codepoint(c);
          d = DB_IDS.ucs2idsDB[c];
          if ( d == undefined || d == null ) {
            res.ignoredChars.push(c);
          } else if ( lookupDB[c] == undefined ) {
            lookupDB[c] = 1;
          } else {
            lookupDB[c] += 1;
          }
        }

        if (res.ignoredChars.length == res.components.length) {
          return res;
        }

        for ( u in DB_IDS.ucs2idsDB ) {
          candidates.push(u);
        }

        for ( c in lookupDB ) {
          for ( i in candidates ) {
            u = candidates[i];
            if ( DB_IDS.ucs2idsDB[u].countAComponent(c) >= lookupDB[c] ) {
              results.push(u);
            }
          }
          candidates = results;
          results = new Array();
        }

        res.foundChars = candidates;
        return res;
      }
      DB_IDS.decomposeUtf16Str = function(ustr) {
        var ucs4arr = DB_IDS.utf16StrToUcsArray(ustr);
        var result = new Array();
        while (ucs4arr.length > 0) {
          var u = ucs4arr.shift();
          if (this.ucs2idsDB[u] != undefined && this.ucs2idsDB[u].idss.length > 0) {
            result.push("(" + this.ucs2idsDB[u].idss.join("|") + ")");
          } else {
            result.push("(" + u + ")");
          }
        }
        return result;
      }
      DB_IDS.addHexCodePointToUcsArray = function(inArr) {
        var outArr = new Array();
        for ( var i in inArr ) {
          var ucsInt = this.ucsArrToUcs4Codepoint(inArr[i]);
          var ucsStr = "U+" + ucsInt.toString(16).toUpperCase();
          if (0xFFFFF < ucsInt && ucsInt < 0x110000) {
            ucsStr = this.crc2charName[ucsInt - 0x100000];
          }
          if ( !DB_IDS.Unihan.isLoaded ) {
            outArr.push( inArr[i] + "(" + ucsStr + ")" );
          } else if ( DB_IDS.Unihan.kTotalStrokes == undefined || inArr[i] == undefined || DB_IDS.Unihan.kTotalStrokes[inArr[i]] == undefined ) {
            outArr.push( inArr[i] + "(" + ucsStr + ":XXX)" );
          } else {
            outArr.push( inArr[i] + "(" + ucsStr + ":" + DB_IDS.Unihan.kTotalStrokes[inArr[i]].toString(10) + ")" );
          }
        }
        return outArr;
      }

      // -------------------------------------------------------
      var brokenFileApi = false;

      // -------------------------------------------------------

      var CurrentUi = function() {
        this.usePng = false;
        this.foundChars = [];
        this.ctrls = {};
        return this;
      };
      CurrentUi.prototype.expandArrayToSelector = function(elmSelector, arr, defaultValue) {
        for (var i = 0; i < arr.length; i += 1) {
          var o = document.createElement("OPTION");
          o.setAttribute("value", arr[i]);
          elmSelector.appendChild(o);
          o.appendChild(document.createTextNode(o.value));
          if (defaultValue == arr[i]) {
            elmSelector.selectedIndex = i;
          }
        }
      };
      CurrentUi.prototype.addGlyphTable = function(elmParent, noNavigator) {

        // ----- table of cropped PNG table with page navigator -----
        var GlyphTable = function() {
          // navigator before/after glyph table
          var Navigator = function(glyphTable) {
            this.glyphTable = glyphTable;
            this.curPage = 0;
            return this;
          };
          Navigator.prototype.movePageByDelta = function(delta) {
            var i = this.curPage + delta;
            try {
              this.elmHeader.selector.childNodes[i].selected = true;
              this.elmFooter.selector.childNodes[i].selected = true;
            }
            catch (err) {
              // no need if we don't care inconsistent current page case
              // this.elmHeader.childNodes[curPage].selected = true;
              // this.elmFooter.childNodes[curPage].selected = true;
              return; // invalid page number (no prev or no next)
            }
            this.curPage = i;
            this.glyphTable.showFoundCharsPartial();
          };
          Navigator.prototype.callbackToMoveNextPage = function() {
            // this function is called as callback from button element
            this.navigator.movePageByDelta(+1);
          };
          Navigator.prototype.callbackToMovePreviousPage = function() {
            // this function is called as callback from button element
            this.navigator.movePageByDelta(-1);
          };
          Navigator.prototype.callbackToMovePageBySelector = function() {
            // this function is called as callback from selector element
            this.navigator.curPage = parseInt(this.value, 10);
            this.navigator.elmHeader.childNodes[curPage].selected = true;
            this.navigator.elmFooter.childNodes[curPage].selected = true;
            this.navigator.glyphTable.showFoundCharsPartial();
          };
          Navigator.prototype.addButtonsAndSelector = function(elmDiv) {
            // add button/selector/button to header, and add event listeners
            var pagePrev = document.createElement("INPUT");
            pagePrev.setAttribute("type", "button");
            pagePrev.setAttribute("value", "prev");
            pagePrev.addEventListener("click", this.callbackToMovePreviousPage);
            elmDiv.appendChild(pagePrev);

            var pageSelector = document.createElement("SELECT");
            pageSelector.addEventListener("change", this.callbacktoMovePageBySelector);
            elmDiv.appendChild(pageSelector);

            var pageNext = document.createElement("INPUT");
            pageNext.setAttribute("type", "button");
            pagePrev.setAttribute("value", "next");
            pageNext.addEventListener("click", this.callbackToMoveNextPage);
            elmDiv.appendChild(pageNext);
          };
          Navigator.prototype.addHeaderAndFooter = function(elmTable) {
            this.elmHeader = document.createElement("DIV");
            this.elmHeader.setAttribute("class", "FoundIdsNavigatorHeader");
            elmTable.parentElement.insertBefore(this.elmHeader, elmTable);
            this.addButtonsAndSelector(this.elmHeader);

            this.elmFooter = document.createElement("DIV");
            this.elmFooter.setAttribute("class", "FoundIdsNavigatorFooter");
            elmTable.parentElement.insertBefore(this.elmFooter, elmTable);
            this.addButtonsAndSelector(this.elmFooter);
          }

          this.addNavigator = function() {
            this.navigator = new Navigator();
            this.navigator.addHeaderAndFooter(this.elmTable);
            return this.nagigator;
          };

          this.picDir = "PNG";
          this.glyphs = [];

          return this;
        };
        GlyphTable.prototype.expandTableMatrix = function() {
          var c, r, rs, x, y;
          if ( this.elmTable.rows.length < this.maxPngRows ) {
            for ( y = this.elmTable.rows.length; y < rows; y += 1 ) {
              this.elmTable.insertRow(-1);
            }
          }
          rs = this.elmTable.rows;
          if ( rs[rs.length - 1].cells.length < (2 * this.maxPngColumns) ) {
            for ( y = 0; y < this.elmTable.rows.length; y += 1 ) {
              r = this.elmTable.rows[y];
              for ( x = r.cells.length; x < (2 * this.maxPngColumns); x += 1 ) {
                r.insertCell(-1);
                r.lastChild.appendChild(document.createTextNode(""));
                r.insertCell(-1);
                r.lastChild.appendChild(document.createElement("img"));
              }
            }
          }
        };
        GlyphTable.prototype.updateTableMatrix = function() {
          var c, r, x, y;
          this.expandTableMatrix();

          for ( y = 0; y < this.elmTable.rows.length; y += 1 ) {
            r = this.elmTable.rows[y];
            for ( x = 0; x < r.cells.length; x += 2 ) {
              if (y < rows && x < (columns*2) ) {
                r.cells[x].style.display = "";
                r.cells[x+1].style.display = "";
              } else {
                r.cells[x].style.display = "none";
                r.cells[x].lastChild.data = "";
                r.cells[x+1].style.display = "none";
                r.cells[x+1].lastChild.src = "";
              }
            }
          }
        };
        GlyphTable.prototype.fillTableWithPng = function(inArr) {
          var i, r, x, y;
          var ctxt, txt, cimg, img;
          var pngDir = this.picDir.value;
          for ( y = 0; y < this.maxPngRows; y += 1 ) {
            r = this.elmTable.rows[y];
            for ( x = 0; x < this.maxPngColumns; x += 1 ) {
              i = ( x * this.maxPngRows ) + y;
              ctxt = r.cells[x*2];
              cimg = r.cells[(x*2) + 1];
              txt = ctxt.childNodes[0];
              img = cimg.childNodes[0];
              if ( i < inArr.length ) {
                var ustr = inArr[i].split("(");
                var uhex = DB_IDS.ucsArrToUcs4Codepoint(ustr[0]).toString(16).toUpperCase();
                var subDir = uhex.slice(0,-2);
                var txt, img;

                txt.data = inArr[i];

                img.height = pngHeight;
                img.align = "middle";
                img.src = pngDir + "/" + subDir + "/U+" + uhex + ".png";

                ctxt.style.display = "";
                cimg.style.display = "";

                if ( x == 0 ) {
                  ctxt.style.borderLeft = "1px solid black";
                }
                cimg.style.borderRight = "1px solid black";

                if ( y == 0 ) {
                  ctxt.style.borderTop = "1px solid black";
                  cimg.style.borderTop = "1px solid black";
                }
                ctxt.style.borderBottom = "1px solid black";
                cimg.style.borderBottom = "1px solid black";
              } else {
                ctxt.style.display = "none";
                cimg.style.display = "none";
              }
            }
          }
        };
        GlyphTable.prototype.callbackToUpdatePngHeight = function() {
          this.parentGlyphTable.pngHeight = parseInt(this.value, 10);
        };
        GlyphTable.prototype.callbackToUpdatePngRow = function() {
          this.parentGlyphTable.pngRow = parseInt(this.value, 10);
          this.parentGlyphTable.updateTableMatrix();
        };
        GlyphTable.prototype.callbackToUpdatePngColumn = function() {
          this.parentGlyphTable.pngColumn = parseInt(this.value, 10);
          this.parentGlyphTable.updateTableMatrix();
        };
        GlyphTable.prototype.addControl = function(elmDiv) {
          elmDiv.appendChild(document.createTextNode("|"));
          elmDiv.appendChild(document.createTextNode("IMG Height"));
          this.elmPngHeight = document.createElement("SELECT");
          elmDiv.appendChild(this.elmPngHeight);
          this.elmPngHeight.parentGlyphTable = this;
          this.parentUi.expandArrayToSelector( this.elmPngHeight,
                                             [20, 30, 40, 50, 60, 70],
                                             50 );
          this.elmPngHeight.addEventListener("change", this.callbackToUpdatePngHeight);

          elmDiv.appendChild(document.createTextNode("|"));
          elmDiv.appendChild(document.createTextNode("nRows"));
          this.elmPngRow = document.createElement("SELECT");
          this.elmPngRow.parentGlyphTable = this;
          elmDiv.appendChild(this.elmPngRow);
          this.parentUi.expandArrayToSelector( this.elmPngRow,
                                             [5, 10, 20],
                                             10 );
          this.elmPngRow.addEventListener("change", this.callbackToUpdatePngRow);

          elmDiv.appendChild(document.createTextNode("|"));
          elmDiv.appendChild(document.createTextNode("nColumns"));
          this.elmPngColumn = document.createElement("SELECT");
          this.elmPngColumn.parentGlyphTable = this;
          elmDiv.appendChild(this.elmPngColumn);
          this.parentUi.expandArrayToSelector( this.elmPngColumn,
                                             [1, 2, 3, 4, 5],
                                             2 );
          this.elmPngColumn.addEventListener("change", this.callbackToUpdatePngColumn);
        };

        this.glyphTable = new GlyphTable();
        this.glyphTable.parentUi = this;
        this.glyphTable.elmTable = document.createElement("TABLE");
        elmParent.appendChild(this.glyphTable.elmTable);
        this.glyphTable.elmTable.setAttribute("border", "0");
        this.glyphTable.elmTable.setAttribute("cellspacing", "0");

        if (!noNavigator) {
          this.glyphTable.addNavigator();
        }
        return this.glyphTable;
      };
      CurrentUi.prototype.showFoundResults = function(arr) {
        if (this.addHexCodeToUcs) {
          arr = DB_IDS.addHexCodePointToUcsArray(arr);
        }

        if (this.usePng) {
          this.elmFoundResultsText.style.display = "none";
          this.glyphTable.fillTableWithPng(arr);
          this.glyphTable.elmTable.style.display = "block";
        } else {
          this.glyphTable.elmTable.style.display = "none";
          this.elmFoundResultsText.innerHTML = arr.join(", ");
          this.elmFoundResultsText.style.display = "block";
        }
      };
      CurrentUi.prototype.loadFileByXHR = function(filePath, destName, msgElm, curBtn, nxtBtn) {
        var err;
        var req;
        curBtn.disabled = true;
        if (window.ActiveXObject) {
          req = new ActiveXObject('Microsoft.XMLHTTP');
        } else {
          req = new XMLHttpRequest();
        }
        req.open('GET', filePath, false);
        try {
          req.send(null);
        }
        catch (err) {
          if (err.code) {
            msgElm.innerHTML = "Error in reading " + filePath + " by " + err.message;
          } else {
            nxtBtn.disabled = false;
            window.currentUi[destName] = req.responseText;
            msgElm.innerHTML = req.responseText.length.toString(10) + " bytes loaded";
          }
        }
        curBtn.disabled = false;
        return err.code;
      }
      CurrentUi.prototype.loadFileByFileAPI = function(filePath, destName, msgElm, curBtn, nxtBtn) {
        var fileReader = new FileReader();
        var fileIsLoaded = false;
        curBtn.disabled = true;
        fileReader.onload = function(event) {
          window.currentUi[destName] = event.target.result;
          msgElm.innerHTML = event.target.result.length.toString(10) + " bytes loaded";
          curBtn.disabled = false;
          nxtBtn.disabled = false;
          fileIsLoaded = true;
        }
        fileReader.readAsText(filePath, "utf-8");
        if (fileReader.readyState == 2 && !fileIsLoaded) {
          brokenFileApi = true;
          msgElm.innerHTML = "Error in reading " + filePath + " by File API, retry with XHR";
          window.currentUi.loadFileByXHR(filePath, destName, msgElm, curBtn, nxtBtn);
        }
      }
      CurrentUi.prototype.loadFile = function(filePath, destName, msgElm, curBtn, nxtBtn) {
        curBtn.disabled = true;
        if (window.File && window.FileReader && !brokenFileApi) {
          window.currentUi.loadFileByFileAPI(filePath, destName, msgElm, curBtn, nxtBtn);
        } else {
          window.currentUi.loadFileByXHR(filePath, destName, msgElm, curBtn, nxtBtn);
        }
      }
      CurrentUi.prototype.loadIdsFile = function() {
        window.currentUi.loadFile(document.IdsFile.PathToIds.files[0], "idsText", elmStatusMsg, document.getElementById("ButtonToLoadIds"), document.getElementById("ButtonToParseIds"));
      }
      CurrentUi.prototype.loadUnihanFile = function() {
        window.currentUi.loadFile(document.UnihanFile.PathToUnihan.files[0], "unihanText", elmStatusMsg, document.getElementById("ButtonToLoadUnihan"), document.getElementById("ButtonToParseUnihan"));
      }
      CurrentUi.prototype.loadCJKUSRFile = function() {
        window.currentUi.loadFile(document.CJKUSRFile.PathToCJKUSR.files[0], "isoCjkSrcText", elmStatusMsg, document.getElementById("ButtonToLoadCJKUSR"), document.getElementById("ButtonToParseCJKUSR"));
      }
      CurrentUi.prototype.parseIdsText = function() {
        document.getElementById("ButtonToParseIds").disabled = true;
        numIdsItems = DB_IDS.initUcs2IdsDBByTSV(window.currentUi.idsText);
        elmStatusMsg.innerHTML = numIdsItems.toString(10) + " items parsed";
        document.getElementById("ButtonToParseIds").disabled = false;
        document.getElementById("ChkboxToShowAtomicIds").disabled = false;
      }
      CurrentUi.prototype.parseUnihanText = function() {
        document.getElementById("ButtonToParseUnihan").disabled = true;
        var numUnihanItems = DB_IDS.Unihan.initByTSV(window.currentUi.unihanText);
        delete unihanText;
        elmStatusMsg.innerHTML =  numUnihanItems + " items parsed";
        document.getElementById("ButtonToParseUnihan").disabled = false;
        document.getElementById("ChkboxForTotalStrokeSort").disabled = false;
      }
      CurrentUi.prototype.parseCJKUSR = function() {
        document.getElementById("ButtonToParseCJKUSR").disabled = true;
        var numCjkSrcTxt = DB_IDS.CJKSR.initByIsoTxt(window.currentUi.isoCjkSrcText);
        elmStatusMsg.innerHTML = numCjkSrcTxt.toString(10) + " items parsed";
        document.getElementById("ButtonToParseCJKUSR").disabled = false;
      }
      CurrentUi.prototype.getSrcFilter = function() {
        var srcFilter = [];
        if (document.getElementById("ChkboxForSrcG").checked) { srcFilter.push("G"); };
        if (document.getElementById("ChkboxForSrcT").checked) { srcFilter.push("T"); };
        if (document.getElementById("ChkboxForSrcJ").checked) { srcFilter.push("J"); };
        if (document.getElementById("ChkboxForSrcK").checked) { srcFilter.push("K"); };
        if (document.getElementById("ChkboxForSrcV").checked) { srcFilter.push("V"); };
        if (document.getElementById("ChkboxForSrcH").checked) { srcFilter.push("H"); };
        if (document.getElementById("ChkboxForSrcU").checked) { srcFilter.push("U"); };
        if (document.getElementById("ChkboxForSrcM").checked) { srcFilter.push("M"); };
        return srcFilter;
      }
      CurrentUi.prototype.lookupComponents = function(queryStr) {
        var res = DB_IDS.lookupByString(queryStr);

        if (res.ignoredChars.length == res.components.length) {
          this.elmStatusMsg.innerHTML = "no searcheable characters are found in the query \"" + queryStr + "\"<br>";
          return;
        }

        elmStatusMsg.innerHTML = "";
        if (res.ignoredChars.length > 0) {
          elmStatusMsg.innerHTML += "\"" + res.ignoredChars.join("\", \"") + "\" are ignored in search<br>";
        }

        if (DB_IDS.CJKSR.isLoaded) {
          res.foundChars = DB_IDS.CJKSR.applyFilterToChars(res.foundChars, getSrcFilter());
        }

        elmStatusMsg.innerHTML += res.foundChars.length.toString(10) + " characters are found";
        if (this.glyphTable && this.glyphTable.navigator) {
          this.glyphTable.navigator.curPage = 0;
        }
        if (this.sortTotalStroke) {
          this.foundChars = DB_IDS.Unihan.sortCharsByTotalStrokes(res.foundChars);
        } else {
          this.foundChars = DB_IDS.Unihan.sortCharsByUCS(res.foundChars);
        }
        this.showFoundResults(this.foundChars);
      }
      CurrentUi.prototype.callbackToLookupComponents = function() {
        // this function is called as callback
        window.currentUi.lookupComponents( document.getElementById("txtQuery").value );
      }
      CurrentUi.prototype.callbackToUpdateAddUcsHex = function() {
        // this function is called as callback
        var currentUi = window.currentUi;
        currentUi.addHexCodeToUcs = document.getElementById("ChkboxForHexUcs").checked;
        currentUi.showFoundResults(currentUi.foundChars);
      }
      CurrentUi.prototype.decomposeSelectedComponents = function(wholeString, selectionStart, selectionEnd) {
        var curHead = wholeString.substring(0,selectionStart);
        var curTail = wholeString.substring(selectionEnd,wholeString.length);
        return curHead + DB_IDS.decomposeUtf16Str(wholeString.substring(selectionStart, selectionEnd - selectionStart + 1)).join("") + curTail; 
      }
      CurrentUi.prototype.wrapDecomposeSelectedComponents = function(formElement) {
        formElement.focus();

        if (formElement.setSelectionRange) {
          formElement.value = decomposeSelectedComponents(formElement.value, formElement.selectionStart, formElement.selectionEnd);

        } else if (document.selection) {
          var nMoved;
          var range = document.selection.createRange();
          var rangeTmp = range.duplicate();
          var selectionStart = 0;
          var selectionEnd = 0;
          do {
            nMoved = rangeTmp.moveStart('character', -1);
            selectionStart -= nMoved;
          } while (nMoved != 0);
          selectionEnd = selectionStart + range.text.length;
          formElement.value = decomposeSelectedComponents(formElement.value, selectionStart, selectionEnd);

        } else {
          elmStatusMsg.innerHTML = "decomposition is not available on this system";
        }
      }

      // ----- utility to add INPUT elements
      CurrentUi.prototype.addElmCheckBoxAndLabel = function(elmDiv, labelText) {
        var elmCheckBox = document.createElement("INPUT");
        elmCheckBox.setAttribute("type", "checkbox");
        var elmLabel = document.createTextNode(labelText);
        elmDiv.appendChild(elmCheckBox);
        elmDiv.appendChild(elmLabel);
        return [elmCheckBox, elmLabel];
      }

      // ----- sort by UCS codepoint or Total Strokes ------
      CurrentUi.prototype.callbackToUpdateSort = function() {
        // this function is called as callback from checkbox element
        var curUi = this.parentUi;
        if (this.checked) {
          curUi.sortTotalStroke = true;
          if (curUi.foundChars != null && curUi.foundChars.length > 0) {
            curUi.foundChars = DB_IDS.Unihan.sortCharsByTotalStrokes(curUi.foundChars);
          }
        } else {
          curUi.sortTotalStroke = false;
          if (curUi.foundChars != null && curUi.foundChars.length > 0) {
            curUi.foundChars = DB_IDS.Unihan.sortCharsByUCS(curUi.foundChars);
          }
        }
        if (curUi.usePng && curUi.foundChars != null && curUi.foundChars.length > (curUi.maxPngRows * curUi.maxPngColumns)) {
          curUi.rollPageNavigators("block");
          curUi.showFoundCharsPartial();
        } else {
          curUi.rollPageNavigators("none");
          curUi.showFoundResult(curUi.foundChars.slice(0));
        }
      };
      CurrentUi.prototype.addControlToSort = function(elmDiv, labelText) {
        if (!labelText) {
          labelText = "sort by total stroke";
        }
        var cbal = this.addElmCheckBoxAndLabel(elmDiv, labelText);
        this.ctrls.sort = {};
        this.ctrls.sort.checkBox = cbal[0];
        this.ctrls.sort.checkBox.parentUi = this;
        this.ctrls.sort.label = cbal[1];

        this.ctrls.sort.checkBox.addEventListener("change", this.callbackToUpdateSort);
        return true;
      };
      CurrentUi.prototype.callbackToRollOptionControls = function() {
        // this function is called as callback from checkbox element
        if (this.checked) {
          this.parentUi.elmOptionControls.style.display = "block";
        } else {
          this.parentUi.elmOptionControls.style.display = "none";
        }
      }
      CurrentUi.prototype.addControlToRollOptions = function(elmDiv, labelText) {
        if (!labelText) {
          labelText = "show options";
        }
        var cbal = this.addElmCheckBoxAndLabel(elmDiv, labelText);
        this.ctrls.options = {};
        this.ctrls.options.checkBox = cbal[0];
        this.ctrls.options.checkBox.parentUi = this;
        this.ctrls.options.label = cbal[1];

        this.ctrls.options.checkBox.addEventListener("change", this.callbackToRollOptionControls);
        return true;
      }
      CurrentUi.prototype.callbackToRollSideBar = function() {
        // this function is called as callback from checkbox element
        var sideBar = this.parentUi.sideBar;
        if (this.checked) {
          sideBar.style.width = sideBarWidthPercent.toString(10) + "%";
          sideBar.style.display = "block";
        } else {
          sideBar.style.width = "0%";
          sideBar.style.display = "none";
        }
      }
      CurrentUi.prototype.addControlToRollSideBar = function(elmDiv, labelText) {
        if (!labelText) {
          labelText = "show SideBar";
        }
        var cbal = this.addElmCheckBoxAndLabel(elmDiv, labelText);
        this.ctrls.sideBar = {};
        this.ctrls.sideBar.checkBox = cbal[0];
        this.ctrls.sideBar.checkBox.parentUi = this;
        this.ctrls.sideBar.label = cbal[1];

        this.ctrls.sideBar.checkBox.addEventListener("change", this.callbackToRollSideBar);
        return true;
      }

      // ----- font size -----
      CurrentUi.prototype.callbackToUpdateFontSize = function() {
        // this function is called as callback from selector element
        var fontSize = parseInt(this.value, 10);
        for (var i = 0; i < this.elmsToUpdate; i += 1) {
          if (this.elmsToUpdate[i] && this.elmsToUpdate[i].style) {
            this.elmsToUpdate[i].style.fontSize = fontSize;
          }
        }
      }
      CurrentUi.prototype.addControlToUpdateFontSize = function(elmDiv, labelText, elmsToUpdate) {
        this.ctrls.fontSize = {};
        this.ctrls.fontSize.label = document.createTextNode(labelText);
        elmDiv.appendChild(this.ctrls.fontSize.label);
        this.ctrls.fontSize.selector = document.createElement("SELECT");
        elmDiv.appendChild(this.ctrls.fontSize.selector);
        this.expandArrayToSelector(this.ctrls.fontSize.selector, [10, 12, 14, 16, 18, 20, 24, 36, 48, 60, 72], 12);
        this.ctrls.fontSize.selector.parentUi = this;
        this.ctrls.fontSize.selector.elmsToUpdate = elmsToUpdate;
        if (!labelText) {
          labelText = "FontSize";
        }

        this.ctrls.fontSize.selector.addEventListener("change", this.callbackToUpdateFontSize);
        return true;
        
      }
      CurrentUi.prototype.callbackToRollAtomicIds = function() {
        // this function is called as callback from checkbox element
        if (!this.elmToUpdate) {
          return;
        } else
        if (this.checked) {
          if (DB_IDS.hasUcs2IdsDB() && this.elmToUpdate.innerHTML.length == 0) {
            var ucs;
            var atomicIds = new Array();
            for ( ucs in DB_IDS.ucs2idsDB ) {
              if ( 1 == DB_IDS.ucs2idsDB[ucs].idsArrays.length && ucs == DB_IDS.ucs2idsDB[ucs].idsArrays[0] ) {
                atomicIds.push(ucs);
              }
            }
            this.elmToUpdate.innerHTML = atomicIds.join(", ");
          }
          this.elmToUpdate.style.display = "block";
        } else {
          this.elmToUpdate.style.display = "none";
        }
      }
      CurrentUi.prototype.addControlToRollAtomicIds = function(elmDiv, labelText, elmToUpdate) {
        if (!labelText) {
          labelText = "show atomic IDS";
        }
        var cbal = this.addElmCheckBoxAndLabel(elmDiv, labelText);
        this.ctrls.rollAtomicIds = {};
        this.ctrls.rollAtomicIds.checkBox = cbal[0];
        this.ctrls.rollAtomicIds.checkBox.parentUi = this;
        this.ctrls.rollAtomicIds.checkBox.elmToUpdate = elmToUpdate;
        this.ctrls.rollAtomicIds.label = cbal[1];

        this.ctrls.rollAtomicIds.checkBox.addEventListener("change", this.callbackToRollAtomicIds);
        return true;
      }
      CurrentUi.prototype.callbackToUpdateUsePng = function() {
        // this function is called as callback from checkbox element
        this.parentUi.usePng = this.checked;
      }
      CurrentUi.prototype.addControlToUsePng = function(elmDiv, labelText) {
        if (!labelText) {
          labelText = "show PNG";
        }
        var cbal = this.addElmCheckBoxAndLabel(elmDiv, labelText);
        this.ctrls.usePng = {};
        this.ctrls.usePng.checkBox = cbal[0];
        this.ctrls.usePng.checkBox.parentUi = this;
        this.ctrls.usePng.label = cbal[1];

        this.ctrls.usePng.checkBox.addEventListener("change", this.callbackToUpdateUsePng);
        return true;
      }
      CurrentUi.prototype.checkAllSources = function() {
        var elmBtnToParseCJKUSR = document.getElementById("ButtonToParseCJKUSR");
        for ( var elm = elmBtnToParseCJKUSR; elm.nextElementSibling != null; elm = elm.nextElementSibling ) {
          if (elm.id.match(/^ChkboxForSrc/)) {
            elm.checked = true;
          }
        }
      }
      CurrentUi.prototype.uncheckAllSources = function() {
        var elmBtnToParseCJKUSR = document.getElementById("ButtonToParseCJKUSR");
        for ( var elm = elmBtnToParseCJKUSR; elm.nextElementSibling != null; elm = elm.nextElementSibling ) {
          if (elm.id.match(/^ChkboxForSrc/)) {
            elm.checked = false;
          }
        }
      }
      window.currentUi = new CurrentUi();

    -->
    </script>
    <div id="Wrapper">
      <div id="Header">
      </div>
      <div id="SideBar">
        <div id="SideBarTop">
          <input type="checkbox" id="ChkboxToShowAtomicIds" onclick="rollAtomicIds(this)" disabled>show atomic ids
        </div>
        <div id="SideBarBody">
          <div id="AtomicIds"></div>
        </div>
      </div>
      <div id="MainContainer">
        <div id="Controls"></div>
        <form name="IdsFile" onsubmit="return false;">
          <input type="file" name="PathToIds">
          <input type="button" id="ButtonToLoadIds"  value="load ids.txt"  onclick="window.currentUi.loadIdsFile()">
          <input type="button" id="ButtonToParseIds" value="parse ids.txt" onclick="window.currentUi.parseIdsText()" disabled>
        </form>
        <form name="UnihanFile" onsubmit="return false;">
          <input type="file" name="PathToUnihan">
          <input type="button" id="ButtonToLoadUnihan"  value="load Unihan.txt"  onclick="window.currentUi.loadUnihanFile()">
          <input type="button" id="ButtonToParseUnihan" value="parse Unihan.txt" onclick="window.currentUi.parseUnihanText()" disabled>
          <input type="checkbox" id="ChkboxForTotalStrokeSort" onclick="updateSort()" disabled>sort by total stroke
        </form>
        <form name="CJKUSRFile" onsubmit="return false;">
          <input type="file" name="PathToCJKUSR">
          <input type="button" id="ButtonToLoadCJKUSR"  value="load CJKU_SR"  onclick="window.currentUi.loadCJKUSRFile()">
          <input type="button" id="ButtonToParseCJKUSR" value="parse CJKU_SR" onclick="window.currentUi.parseCJKUSR()" disabled>
          <input type="checkbox" id="ChkboxForSrcG" checked>G
          <input type="checkbox" id="ChkboxForSrcT" checked>T
          <input type="checkbox" id="ChkboxForSrcJ" checked>J
          <input type="checkbox" id="ChkboxForSrcK" checked>K
          <input type="checkbox" id="ChkboxForSrcV" checked>V
          <input type="checkbox" id="ChkboxForSrcH" checked>H
          <input type="checkbox" id="ChkboxForSrcU" checked>U
          <input type="checkbox" id="ChkboxForSrcM" checked>M
          <input type="button" id="ButtonToCheckAll" value="Include All" onclick="checkAllSources()">
          <input type="button" id="ButtonToUncheckAll" value="Exclude All" onclick="uncheckAllSources()">
        </form>
        <form name="CheckComponent" onsubmit="return false;">
          <input id="txtQuery" type="text" name="Components">
          <input id="btnQuery" type="button" value="lookup">
          <input id="btnDecompose" type="button" value="decompose selected chars" onclick="wrapDecomposeSelectedComponents(this.form.elements[0])">
          <br>
          <input type="checkbox" id="ChkboxForHexUcs">show UCS codepoint
          <br>
        </form>
        <div id="StatusMsg"></div>
        <div id="FoundResults"></div>
      </div>
      <div id="Footer"></div>
    </div>
    <script>
      window.currentUi = new CurrentUi();
      var currentUi = window.currentUi;

      // -- setup control panels
      currentUi.elmDivFoundResults = document.getElementById("FoundResults");
      currentUi.elmFoundResultsText = document.createElement("DIV");
      currentUi.elmDivFoundResults.appendChild(currentUi.elmFoundResultsText);
      currentUi.addGlyphTable(currentUi.elmDivFoundResults);

      var elmControls = document.getElementById("Controls");
      currentUi.addControlToRollOptions(elmControls, "show Options");
      currentUi.addControlToRollSideBar(elmControls, "show SideBar");
      currentUi.addControlToSort(elmControls, "sort by Total Strokes");

      currentUi.elmOptionControls = document.createElement("DIV");
      currentUi.elmOptionControls.style.display = "none";
      elmControls.appendChild(currentUi.elmOptionControls);

      currentUi.addControlToUpdateFontSize(currentUi.elmOptionControls, "FontSize", [currentUi.elmFoundResultsText]);
      currentUi.addControlToUsePng(currentUi.elmOptionControls);
      currentUi.glyphTable.addControl(currentUi.elmOptionControls);

      // -- setup elementary buttons
      document.getElementById("btnQuery").addEventListener("click", currentUi.callbackToLookupComponents);
      document.getElementById("ChkboxForHexUcs").addEventListener("click", currentUi.callbackToUpdateAddUcsHex);


      elmSideBar = document.getElementById("SideBar");
      elmAtomicIds = document.getElementById("AtomicIds");
      elmStatusMsg = document.getElementById("StatusMsg");
      elmFoundIdsBody = document.getElementById("FoundIdsBody");
      elmFoundIdsTable = document.getElementById("FoundIdsTable");
    </script>
  </body>
</html>
